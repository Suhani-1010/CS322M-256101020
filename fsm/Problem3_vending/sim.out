#! /c/iverilog/bin/vvp
:ivl_version "0.9.7 " "(v0_9_7)";
:vpi_time_precision - 9;
:vpi_module "system";
:vpi_module "v2005_math";
:vpi_module "va_math";
S_01013DE0 .scope module, "tb_vending_mealy" "tb_vending_mealy" 2 3;
 .timescale -9 -9;
v010539C8_0 .net "chg5", 0 0, L_010163E0; 1 drivers
v01053810_0 .var "clk", 0 0;
v010538C0_0 .var "coin", 1 0;
v01053760_0 .net "dispense", 0 0, L_01015EA0; 1 drivers
v01053A20_0 .var "rst", 0 0;
S_010134D8 .scope task, "idle" "idle" 2 39, 2 39, S_01013DE0;
 .timescale -9 -9;
TD_tb_vending_mealy.idle ;
    %wait E_010190E8;
    %set/v v010538C0_0, 0, 2;
    %wait E_01019088;
    %load/v 8, v01053760_0, 1;
    %jmp/0xz  T_0.0, 8;
    %vpi_call 2 44 "$display", "ERROR: idle -> dispense=1";
T_0.0 ;
    %load/v 8, v010539C8_0, 1;
    %jmp/0xz  T_0.2, 8;
    %vpi_call 2 45 "$display", "ERROR: idle -> chg5=1";
T_0.2 ;
    %end;
S_01013AB0 .scope task, "put_coin" "put_coin" 2 22, 2 22, S_01013DE0;
 .timescale -9 -9;
v010532E8_0 .var "c", 1 0;
v010534F8_0 .var "exp_chg", 0 0;
v01053550_0 .var "exp_disp", 0 0;
E_010190E8 .event negedge, v01053080_0;
TD_tb_vending_mealy.put_coin ;
    %wait E_010190E8;
    %load/v 8, v010532E8_0, 2;
    %set/v v010538C0_0, 8, 2;
    %wait E_01019088;
    %load/v 8, v01053760_0, 1;
    %load/v 9, v01053550_0, 1;
    %cmp/u 8, 9, 1;
    %inv 6, 1;
    %jmp/0xz  T_1.4, 6;
    %vpi_call 2 31 "$display", "ERROR: coin=%b exp_disp=%b got=%b", v010532E8_0, v01053550_0, v01053760_0;
T_1.4 ;
    %load/v 8, v010539C8_0, 1;
    %load/v 9, v010534F8_0, 1;
    %cmp/u 8, 9, 1;
    %inv 6, 1;
    %jmp/0xz  T_1.6, 6;
    %vpi_call 2 33 "$display", "ERROR: coin=%b exp_chg=%b got=%b", v010532E8_0, v010534F8_0, v010539C8_0;
T_1.6 ;
    %wait E_010190E8;
    %set/v v010538C0_0, 0, 2;
    %end;
S_01013F78 .scope module, "dut" "vending_mealy" 2 9, 3 2, S_01013DE0;
 .timescale 0 0;
P_00FE917C .param/l "S0" 3 10, C4<00>;
P_00FE9190 .param/l "S10" 3 12, C4<10>;
P_00FE91A4 .param/l "S15" 3 13, C4<11>;
P_00FE91B8 .param/l "S5" 3 11, C4<01>;
L_01015EA0 .functor AND 1, L_01053970, L_01054768, C4<1>, C4<1>;
L_010163E0 .functor AND 1, L_01054B88, L_01054870, C4<1>, C4<1>;
v01012608_0 .net *"_s0", 1 0, C4<01>; 1 drivers
v01012660_0 .net/s *"_s10", 4 0, C4<01010>; 1 drivers
v010127C0_0 .net/s *"_s12", 4 0, C4<00000>; 1 drivers
v010122F0_0 .net *"_s14", 4 0, L_01053AD0; 1 drivers
v01012818_0 .net *"_s18", 5 0, L_01053B80; 1 drivers
v01012870_0 .net *"_s2", 0 0, L_01053B28; 1 drivers
v010128C8_0 .net *"_s21", 0 0, C4<0>; 1 drivers
v01012920_0 .net *"_s22", 5 0, L_01053868; 1 drivers
v01012978_0 .net *"_s25", 0 0, C4<0>; 1 drivers
v01053448_0 .net *"_s28", 5 0, L_01053918; 1 drivers
v01052D68_0 .net *"_s31", 0 0, C4<0>; 1 drivers
v01052E70_0 .net *"_s32", 5 0, C4<000000>; 1 drivers
v010535A8_0 .net *"_s34", 0 0, L_01053970; 1 drivers
v01053600_0 .net *"_s36", 6 0, L_010547C0; 1 drivers
v01052F78_0 .net *"_s39", 0 0, C4<0>; 1 drivers
v01053398_0 .net/s *"_s4", 4 0, C4<00101>; 1 drivers
v01053658_0 .net *"_s40", 6 0, C4<0010100>; 1 drivers
v01053708_0 .net *"_s42", 0 0, L_01054768; 1 drivers
v010536B0_0 .net *"_s46", 5 0, L_010549D0; 1 drivers
v01052C60_0 .net *"_s49", 0 0, C4<0>; 1 drivers
v01052E18_0 .net *"_s50", 5 0, C4<000000>; 1 drivers
v01052FD0_0 .net *"_s52", 0 0, L_01054B88; 1 drivers
v01053340_0 .net *"_s54", 6 0, L_01054818; 1 drivers
v01053290_0 .net *"_s57", 0 0, C4<0>; 1 drivers
v010533F0_0 .net *"_s58", 6 0, C4<0011001>; 1 drivers
v010531E0_0 .net *"_s6", 1 0, C4<10>; 1 drivers
v01052CB8_0 .net *"_s60", 0 0, L_01054870; 1 drivers
v01053188_0 .net *"_s8", 0 0, L_01053A78; 1 drivers
v01052DC0_0 .alias "chg5", 0 0, v010539C8_0;
v01053080_0 .net "clk", 0 0, v01053810_0; 1 drivers
v01052D10_0 .net "coin", 1 0, v010538C0_0; 1 drivers
v01052EC8_0 .net "coin_val", 4 0, L_010537B8; 1 drivers
v01052F20_0 .alias "dispense", 0 0, v01053760_0;
v010534A0_0 .net "new_total", 5 0, L_01053BD8; 1 drivers
v01053130_0 .var "next_state", 1 0;
v01053028_0 .net "rst", 0 0, v01053A20_0; 1 drivers
v010530D8_0 .var "state", 1 0;
v01053238_0 .var "total_val", 4 0;
E_01019088 .event posedge, v01053080_0;
E_01019028 .event edge, v010530D8_0, v01052EC8_0, v010534A0_0;
E_01019168 .event edge, v010530D8_0;
L_01053B28 .cmp/eq 2, v010538C0_0, C4<01>;
L_01053A78 .cmp/eq 2, v010538C0_0, C4<10>;
L_01053AD0 .functor MUXZ 5, C4<00000>, C4<01010>, L_01053A78, C4<>;
L_010537B8 .functor MUXZ 5, L_01053AD0, C4<00101>, L_01053B28, C4<>;
L_01053B80 .concat [ 5 1 0 0], v01053238_0, C4<0>;
L_01053868 .concat [ 5 1 0 0], L_010537B8, C4<0>;
L_01053BD8 .arith/sum 6, L_01053B80, L_01053868;
L_01053918 .concat [ 5 1 0 0], L_010537B8, C4<0>;
L_01053970 .cmp/ne 6, L_01053918, C4<000000>;
L_010547C0 .concat [ 6 1 0 0], L_01053BD8, C4<0>;
L_01054768 .cmp/ge 7, L_010547C0, C4<0010100>;
L_010549D0 .concat [ 5 1 0 0], L_010537B8, C4<0>;
L_01054B88 .cmp/ne 6, L_010549D0, C4<000000>;
L_01054818 .concat [ 6 1 0 0], L_01053BD8, C4<0>;
L_01054870 .cmp/eq 7, L_01054818, C4<0011001>;
    .scope S_01013F78;
T_2 ;
    %wait E_01019168;
    %load/v 8, v010530D8_0, 2;
    %cmpi/u 8, 0, 2;
    %jmp/1 T_2.0, 6;
    %cmpi/u 8, 1, 2;
    %jmp/1 T_2.1, 6;
    %cmpi/u 8, 2, 2;
    %jmp/1 T_2.2, 6;
    %cmpi/u 8, 3, 2;
    %jmp/1 T_2.3, 6;
    %set/v v01053238_0, 0, 5;
    %jmp T_2.5;
T_2.0 ;
    %set/v v01053238_0, 0, 5;
    %jmp T_2.5;
T_2.1 ;
    %movi 8, 5, 5;
    %set/v v01053238_0, 8, 5;
    %jmp T_2.5;
T_2.2 ;
    %movi 8, 10, 5;
    %set/v v01053238_0, 8, 5;
    %jmp T_2.5;
T_2.3 ;
    %movi 8, 15, 5;
    %set/v v01053238_0, 8, 5;
    %jmp T_2.5;
T_2.5 ;
    %jmp T_2;
    .thread T_2, $push;
    .scope S_01013F78;
T_3 ;
    %wait E_01019028;
    %load/v 8, v010530D8_0, 2;
    %set/v v01053130_0, 8, 2;
    %load/v 8, v01052EC8_0, 5;
    %mov 13, 0, 1;
    %cmpi/u 8, 0, 6;
    %jmp/0xz  T_3.0, 4;
    %load/v 8, v010530D8_0, 2;
    %set/v v01053130_0, 8, 2;
    %jmp T_3.1;
T_3.0 ;
    %movi 8, 20, 7;
    %load/v 15, v010534A0_0, 6;
    %mov 21, 0, 1;
    %cmp/u 8, 15, 7;
    %or 5, 4, 1;
    %jmp/0xz  T_3.2, 5;
    %set/v v01053130_0, 0, 2;
    %jmp T_3.3;
T_3.2 ;
    %load/v 8, v010534A0_0, 6;
    %cmpi/u 8, 0, 6;
    %jmp/1 T_3.4, 6;
    %cmpi/u 8, 5, 6;
    %jmp/1 T_3.5, 6;
    %cmpi/u 8, 10, 6;
    %jmp/1 T_3.6, 6;
    %cmpi/u 8, 15, 6;
    %jmp/1 T_3.7, 6;
    %set/v v01053130_0, 0, 2;
    %jmp T_3.9;
T_3.4 ;
    %set/v v01053130_0, 0, 2;
    %jmp T_3.9;
T_3.5 ;
    %movi 8, 1, 2;
    %set/v v01053130_0, 8, 2;
    %jmp T_3.9;
T_3.6 ;
    %movi 8, 2, 2;
    %set/v v01053130_0, 8, 2;
    %jmp T_3.9;
T_3.7 ;
    %set/v v01053130_0, 1, 2;
    %jmp T_3.9;
T_3.9 ;
T_3.3 ;
T_3.1 ;
    %jmp T_3;
    .thread T_3, $push;
    .scope S_01013F78;
T_4 ;
    %wait E_01019088;
    %load/v 8, v01053028_0, 1;
    %jmp/0xz  T_4.0, 8;
    %ix/load 0, 2, 0;
    %assign/v0 v010530D8_0, 0, 0;
    %jmp T_4.1;
T_4.0 ;
    %load/v 8, v01053130_0, 2;
    %ix/load 0, 2, 0;
    %assign/v0 v010530D8_0, 0, 8;
T_4.1 ;
    %jmp T_4;
    .thread T_4;
    .scope S_01013DE0;
T_5 ;
    %set/v v01053810_0, 0, 1;
    %end;
    .thread T_5;
    .scope S_01013DE0;
T_6 ;
    %delay 5, 0;
    %load/v 8, v01053810_0, 1;
    %inv 8, 1;
    %set/v v01053810_0, 8, 1;
    %jmp T_6;
    .thread T_6;
    .scope S_01013DE0;
T_7 ;
    %vpi_call 2 18 "$dumpfile", "dump.vcd";
    %vpi_call 2 19 "$dumpvars", 1'sb0, S_01013DE0;
    %end;
    .thread T_7;
    .scope S_01013DE0;
T_8 ;
    %set/v v01053A20_0, 1, 1;
    %set/v v010538C0_0, 0, 2;
    %movi 8, 2, 3;
T_8.0 %cmp/s 0, 8, 3;
    %jmp/0xz T_8.1, 5;
    %add 8, 1, 3;
    %wait E_01019088;
    %jmp T_8.0;
T_8.1 ;
    %set/v v01053A20_0, 0, 1;
    %vpi_call 2 54 "$display", "Test1: 10 + 10 => vend";
    %movi 8, 2, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %movi 8, 2, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 1, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %fork TD_tb_vending_mealy.idle, S_010134D8;
    %join;
    %vpi_call 2 59 "$display", "Test2: 5 + 5 + 10 => vend";
    %movi 8, 1, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %movi 8, 1, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %movi 8, 2, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 1, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %fork TD_tb_vending_mealy.idle, S_010134D8;
    %join;
    %vpi_call 2 66 "$display", "Test3: 10 + 5 + 10 => vend + change";
    %movi 8, 2, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %movi 8, 1, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %movi 8, 2, 2;
    %set/v v010532E8_0, 8, 2;
    %set/v v01053550_0, 1, 1;
    %set/v v010534F8_0, 1, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %fork TD_tb_vending_mealy.idle, S_010134D8;
    %join;
    %vpi_call 2 73 "$display", "Test4: invalid coin (11) ignored";
    %set/v v010532E8_0, 1, 2;
    %set/v v01053550_0, 0, 1;
    %set/v v010534F8_0, 0, 1;
    %fork TD_tb_vending_mealy.put_coin, S_01013AB0;
    %join;
    %fork TD_tb_vending_mealy.idle, S_010134D8;
    %join;
    %vpi_call 2 78 "$display", "Simulation finished.";
    %vpi_call 2 79 "$finish";
    %end;
    .thread T_8;
# The file index is used to find the file name in the following table.
:file_names 4;
    "N/A";
    "<interactive>";
    "tb_vending_mealy.v";
    "vending_mealy.v";
